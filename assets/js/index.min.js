$(document).ready(function(){function a(a,e){var n=a.width(),o=e.width(),t=a.height(),s=e.height(),r=!1;if(t<s){a.css({width:"auto",height:"100%"}),n=a.width(),o=e.width();var c=(n-o)/2;a.css("margin-left","-"+c+"px"),r=!0}else{var i=(s-t)/2;a.css("margin-top",i+"px"),r=!0}r&&(a.fadeIn(),r=!1)}function e(){var a=$("#search_input"),e=$(".search_result");i=$("#base_url").val(),a.focus(function(){$(".icon-search").css("color","#3199DB"),e.show()}),a.keyup(n(this.autoComplete)),$(document).click(function(a){"search_input"!==a.target.id&&"search_result"!==a.target.className&&"search_item"!==a.target.className&&($(".icon-search").css("color","#CAD3DC"),e.hide())})}function n(a,e){var n;return e=e||120,function(){var o=this,t=arguments,s=function(){a.apply(o,t)};clearTimeout(n),n=setTimeout(s,e)}}function o(a){a+="\n\n著作权归作者所有。\n商业转载请联系作者获得授权,非商业转载请注明出处。\n原文: "+location.href,$(".post-content").on("copy",function(e){(window.clipboardData||e.originalEvent.clipboardData).setData("text/plain",a),e.preventDefault()})}if($("#menu-toggle").on("click",function(a){$(".g-nav").slideToggle(200),$(document).one("click",function(){$(".g-nav").slideUp(200)}),a.stopPropagation()}),$(".g-nav").on("click",function(a){a.stopPropagation()}),$(window).width()>695){var t=$(".g-header"),s=t.outerHeight(),r=$(".g-logo"),c=$(".g-nav a"),i=$("#base_url").val(),l=$(".g-banner").attr("data-theme"),g=$(document).scrollTop();$(document).scroll(function(){var a=$(this).scrollTop();a>s?(a>3*s&&t.addClass("headerUp"),t.css({"background-color":"rgba(255, 255, 255, .98)","box-shadow":"0 1px 12px rgba(0, 0, 0, .08)"}),r.css({background:"url("+i+"assets/icons/logo_"+l+".svg) no-repeat center","background-size":"100% 100%"}),c.css("color","#666"),$(".g-nav").addClass("nav-"+l)):(t.removeClass("headerUp"),t.css({"background-color":"transparent","box-shadow":"none"}),r.css({background:"url("+i+"assets/icons/logo.svg) no-repeat center","background-size":"100% 100%"}),c.css("color","#fff"),$(".g-nav").removeClass("nav-"+l)),g>a?t.addClass("headerDown"):t.removeClass("headerDown"),a>480?$(".catalog-container").addClass("fixed"):$(".catalog-container").removeClass("fixed"),g=a})}$(".read-next-item section").each(function(){var a=$(this),e=a.height(),n=$(".read-next-item").height();a.css("margin-top",(n-e)/2+"px"),a.fadeIn()}),$(".read-next-item img").each(function(){a($(this),$(".read-next-item"))}),function(){for(var a=parseInt($("#total_pages").val()),e=parseInt($("#current_pages").val()),n=$("#base_url").val(),o="",t=e-3;t<e;t++)t>0&&1!==t?o+='<a href="'+n+"page"+t+'" class="page-link page-num">'+t+"</a>":1===t&&(o+='<a href="'+n+'" class="page-link page-num">'+t+"</a>");o+='<span class="page-link page-num active">'+e+"</span>";for(var s=e+1;s<=e+3;s++)s<=a&&(o+='<a href="'+n+"page"+s+'" class="page-link page-num">'+s+"</a>");$("#page-link-container").html(o)}(),e.prototype.autoComplete=function(){var a=this.value.toLowerCase();a.length?$(".icon-search").css("color","#3199DB"):$(".icon-search").css("color","#CAD3DC"),$.getJSON(i+"search.json").done(function(e){var n="";for(var o in e){var t=e[o],s=t.title,r=t.tags,c=(t.url,s+r);""!==a&&c.toLowerCase().indexOf(a)>=0&&(n+='<a class="search_item" href="'+i.replace(/\/$/,"")+t.url+'">'+t.title+"</a>")}$(".search_result").html(n)})},new e,"true"===$("#nm-switch").val()&&function(){var a=$("body"),e=new Date,n=e.getHours();(n>=0&&n<=6||23===n)&&a.addClass("night-mode")}(),$(".post-content").on("mouseup",function(a){var e=window.getSelection();e.toString().length>=30&&o(e)}),$(".catalog-body").length&&$().onePageNav&&(!function(a){var e,n,o,t,s,r,c=$("article.markdown-body");e=c.find("h1,h2,h3,h4,h5,h6"),e.each(function(){n=$(this).prop("tagName").toLowerCase(),s=$(this).prop("id"),o=$(this).text(),r=$('<a href="#'+s+'" rel="nofollow">'+o+"</a>"),t=$('<li class="'+n+'_nav"></li>').append(r),$(a).append(t)})}(".catalog-body"),$(".catalog-body").onePageNav({currentClass:"active",changeHash:!1,easing:"swing",filter:"",scrollSpeed:700,scrollOffset:0,scrollThreshold:.2,begin:null,end:null,scrollChange:null,padding:80}))});